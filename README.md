# CUBE CSS Boilerplate

ðŸš¨ **PLEASE READ THIS EXPLAINER**:
https://piccalil.li/blog/a-css-project-boilerplate ðŸš¨

This is a fork of
[Set Studio's CUBE CSS boilerplate](https://github.com/Set-Creative-Studio/cube-boilerplate).
This fork exists to provide a Tailwind v4 + Vite alternative.

## Table of Contents

- [Getting Started](#getting-started)
- [Utility Scripts](#utility-scripts)
- [Comparison with Original](#comparison-with-original)
  - [Configuration](#configuration)
  - [Removing and Overriding Tailwind Default Styles](#removing-and-overriding-tailwind-default-styles)
  - [Design Token Generation](#design-token-generation)
- [License](#license)

## Getting Started

1. Install dependencies: `pnpm install`
2. Start the dev server: `pnpm run dev`
   - Uses Vite; it watches and hot-reloads changes to CSS, JS/TS, and
     `index.html`.
   - If you've configured the theme plugin (optional), it will automatically
     generate `theme.css` from your design tokens.
3. Build for production: `pnpm run build`
4. Preview the production build: `pnpm run preview`

## Utility Scripts

- Generate theme from design tokens: `pnpm run theme`
  - Outputs to `src/css/theme.css`
  - Use this for manual generation or when the Vite plugin is not configured
  - Supports CLI options: `--output`, `--tokens`, `--root-size`, `--help`
- Format all files: `pnpm run format:all`
- Lint and fix: `pnpm run lint:all`

## Comparison with Original

### Configuration

Tailwind CSS v4.0 shifted from configuring your project in JavaScript to
configuring it in CSS. Your theme can still be configured within
`tailwind.config.js` and imported via
[`@config()`](https://tailwindcss.com/docs/functions-and-directives#config-directive),
but the recommended way is to use the new
[`@theme`](https://tailwindcss.com/docs/functions-and-directives#theme-directive)
directive.

All defined theme values will be added to your CSS as regular custom properties
inside the `:root`. This makes it very easy to reuse them across your whole
project.

### Removing and Overriding Tailwind Default Styles

Tailwind CSS allows you to completely disable default theme styles by removing
the import `@import "tailwindcss/theme.css" layer(theme);`. Alternatively, you
can use the `@theme()` and override the existing
[namespaces](https://tailwindcss.com/docs/theme#theme-variable-namespaces) with
`initial`.

```css
@theme {
	--color-*: initial;
	--color-dark: #030303;
	--color-light: #ffffff;
	--color-primary: #02394a;
	--color-secondary: #75eab0;
}
```

Here we select all default colors and disable them. Then we define our own
custom colors.

You can also override specific values like this:

```css
@theme {
	--breakpoint-sm: 20.625rem; /* 330px */
	--breakpoint-md: 47.5rem; /* 760px */
	--breakpoint-lg: 76.875rem; /* 1230px */
}
```

In this example, breakpoints `sm`, `md` and `lg` will be overridden.

### Design Token Generation

This boilerplate extends the original design token system with automated
generation capabilities. Unlike the original boilerplate that defines tokens in
`tailwind.config.js`, this fork generates a CSS file with Tailwind v4's `@theme`
directive. This automatically creates CSS custom properties from your design
tokens, making them available throughout your project as regular CSS variables.

#### Two Usage Modes

You can choose between two approaches for theme generation:

**Automated (Optional)**: Use the Vite plugin for automatic generation during
development and build **Manual**: Use the CLI command `pnpm run theme` for
on-demand generation

#### Vite Plugin Setup (Optional)

To enable automatic theme generation, configure the plugin in your
`vite.config.ts`:

```typescript
import themePlugin from './plugins/theme'

export default defineConfig({
	plugins: [
		themePlugin({
			tokensGlob: 'src/design-tokens/**/*.json',
			outputPath: 'src/css/theme.css',
			outputDir: 'src/css',
			outputFile: 'theme.css',
			tokensDir: 'src/design-tokens',
		}),
	],
})
```

The plugin provides:

- Auto-generation on dev server start
- File watching that regenerates theme when tokens change
- Build-time generation

#### Schema Validation

All design token files are validated using Zod schemas for type safety and clear
error messages.

#### CLI Usage

For manual theme generation, use the `pnpm run theme` command with these
options:

- `--output/-o <path>`: Specify output path for the theme file
- `--tokens/-t <dir>`: Custom directory containing token JSON files
- `--root-size <number>`: Root font size in px used for rem conversion
  (default: 16)
- `--help/-h`: Show help message with all options

Example generated output:

```css
/* AUTO-GENERATED by scripts/css-utils/create-theme.ts on 2025-01-01T00:00:00.000Z â€” Do NOT edit directly. */
@theme {
	--breakpoint-sm: 20.625rem;
	--breakpoint-md: 47.5rem;
	--breakpoint-lg: 76.875rem;
	--spacing-s: clamp(1.125rem, 0.99rem + 0.67vw, 1.5rem);
	--color-primary: #02394a;
	--text-step-1: clamp(1.35rem, 1.27rem + 0.38vw, 1.5625rem);
}
```

## License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file
for details.
